# Kubernetes Infrastructure Umbrella Chart Values

global:
  # Global settings

# Monitoring Stack (Prometheus, Grafana, Alertmanager)
monitoring:
  enabled: true
  
  kube-prometheus-stack:
    # Grafana 설정
    grafana:
      enabled: true
      adminUser: admin
      adminPassword: admin
      persistence:
        enabled: true
        size: 10Gi
      service:
        type: NodePort
      ingress:
        enabled: true
        ingressClassName: nginx
        hosts:
          - host: grafana.zstake.xyz
            paths:
              - /
        tls:
          - secretName: grafana-zstake-xyz-tls
            hosts:
              - grafana.zstake.xyz
    
    # Prometheus 설정
    prometheus:
      enabled: true
      prometheusSpec:
        retention: 30d
        storageSpec:
          volumeClaimTemplate:
            spec:
              accessModes: ["ReadWriteOnce"]
              resources:
                requests:
                  storage: 50Gi
        serviceMonitorSelectorNilUsesHelmValues: false
        podMonitorSelectorNilUsesHelmValues: false
        ruleSelectorNilUsesHelmValues: false
      service:
        type: NodePort
      ingress:
        enabled: true
        ingressClassName: nginx
        hosts:
          - host: prometheus.zstake.xyz
            paths:
              - /
        tls:
          - secretName: prometheus-zstake-xyz-tls
            hosts:
              - prometheus.zstake.xyz
    
    # Alertmanager 설정
    alertmanager:
      enabled: true
      alertmanagerSpec:
        storage:
          volumeClaimTemplate:
            spec:
              accessModes: ["ReadWriteOnce"]
              resources:
                requests:
                  storage: 10Gi
      service:
        type: NodePort
      ingress:
        enabled: true
        ingressClassName: nginx
        hosts:
          - host: alert.zstake.xyz
            paths:
              - /
        tls:
          - secretName: alert-zstake-xyz-tls
            hosts:
              - alert.zstake.xyz
    
    # Prometheus Operator 설정
    prometheusOperator:
      enabled: true

# Nginx Ingress Controller
ingress-nginx:
  enabled: true
  
  controller:
    service:
      type: NodePort
    hostNetwork: true
    publishService:
      enabled: false
    metrics:
      enabled: true
    admissionWebhooks:
      enabled: true
      patch:
        enabled: true

# Cert-Manager
cert-manager:
  enabled: true
  
  installCRDs: true
  
  # ClusterIssuer는 별도로 생성 (ArgoCD Application에서)
